<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

<div class="container my-2">

  <!-- TITLE -->
  <div class="text-center reels-heading mt-5">
    <a href="https://www.facebook.com/middleeastbull18/" target="_blank">
         Facebook Reels
    </a>
    <span class="reels-line"></span>
  </div>

  <!-- REELS SLIDER -->
  <div class="swiper fb-reels-slider">
    <div class="swiper-wrapper">

      {% for reel in fb_reels %}
      <div class="swiper-slide">
       <div class="fb-video"
            data-href="{{ reel.youtube_url|default:'' }}"
            data-width="300">
        </div>
      </div>
      {% empty %}
      
      {% endfor %}

    </div>
  </div>

</div>


<!-- Facebook SDK -->
<div id="fb-root"></div>
<script async defer crossorigin="anonymous"
src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v19.0">
</script>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

  const swiper = new Swiper(".fb-reels-slider", {
    slidesPerView: "auto",
    spaceBetween: 20,
    grabCursor: true,
    freeMode: true,
    breakpoints: {
      768: { slidesPerView: 2 },
      1024: { slidesPerView: 3 },
      1200: { slidesPerView: 4 }
    }
  });

  // Important: Re-render Facebook embeds after Swiper loads
  setTimeout(function(){
    if (typeof FB !== "undefined") {
      FB.XFBML.parse();
    }
  }, 1200);

});
</script>

<style>

/* TITLE */
.reels-heading{
  font-weight: 700;
  font-size: 32px;
}
.reels-heading a{
  font-weight: 700;
  font-size: 32px !important;
  text-decoration: none;
  color: white !important;
}

.reels-line{
  width: 70px;
  height: 3px;
  background: #1877f2;
  display: block;
  margin: 12px auto 0;
  border-radius: 5px;
}

/* SLIDE WIDTH */
.swiper-slide{
  width: 300px;
}

/* REEL CARD */
.fb-reel-card{
  aspect-ratio: 9/16;
  border-radius: 18px;
  overflow: hidden;
  background: #000;
  box-shadow: 0 15px 35px rgba(0,0,0,.25);
  transition: .3s;
}

.fb-reel-card:hover{
  transform: translateY(-6px);
  box-shadow: 0 25px 50px rgba(0,0,0,.35);
}

@media(max-width:768px){
  .swiper-slide{
    width: 220px;
  }
}

</style>